[tox]
envlist = py39,py310,py311,py312,lint,type-check
isolated_build = true
skip_missing_interpreters = true

[testenv]
deps =
    pytest>=7.0.0
    pytest-qt>=4.0.0
    pytest-cov>=4.0.0
    pytest-benchmark>=4.0.0
commands =
    pytest tests/ -v --tb=short

[testenv:lint]
deps =
    ruff>=0.3.0
    black>=22.0.0
    isort>=5.10.0
commands =
    ruff check qt_theme_studio/ tests/ scripts/
    ruff format --check qt_theme_studio/ tests/ scripts/
    black --check qt_theme_studio/ tests/ scripts/
    isort --check-only qt_theme_studio/ tests/ scripts/

[testenv:type-check]
deps =
    mypy>=1.0.0
    types-requests
commands =
    mypy qt_theme_studio/

[testenv:security]
deps =
    bandit>=1.7.0
    safety>=2.3.0
commands =
    bandit -r qt_theme_studio/
    safety check

[testenv:coverage]
deps =
    pytest>=7.0.0
    pytest-qt>=4.0.0
    pytest-cov>=4.0.0
commands =
    pytest tests/ --cov=qt_theme_studio --cov-report=html --cov-report=xml --cov-report=term

[testenv:docs]
deps =
    sphinx>=4.0.0
    sphinx-rtd-theme
commands =
    sphinx-build -b html docs/ docs/_build/html

# GitHub Actions用の設定
[gh-actions]
python =
    3.9: py39
    3.10: py310
    3.11: py311
    3.12: py312
